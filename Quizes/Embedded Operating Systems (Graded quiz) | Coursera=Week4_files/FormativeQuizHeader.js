define("bundles/quiz-formative/components/FormativeQuizHeader",["require","exports","module","react","bundles/phoenix/models/evaluation","pages/open-course/common/models/itemMetadata","bundles/quiz-question-types/models/AbstractQuestion","bundles/quiz-common/components/PerformanceBar","bundles/quiz-common/components/QuestionCountLabel","bundles/quiz-common/components/Score","bundles/quiz-common/components/SubmitArea","bundles/quiz-common/utils/FsmUtils","bundles/quiz-common/actions/QuizActions","js/lib/coursera.react-intl","i18n!nls/quiz-formative"],function(require,exports,module){"use strict";function _defaults(e,s){for(var a=Object.getOwnPropertyNames(s),t=0;t<a.length;t++){var n=a[t],o=Object.getOwnPropertyDescriptor(s,n);o&&o.configurable&&void 0===e[n]&&Object.defineProperty(e,n,o)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):_defaults(t,e))}var a,c,o,s,e=require("react"),i=require("bundles/phoenix/models/evaluation"),r=require("pages/open-course/common/models/itemMetadata"),d=require("bundles/quiz-question-types/models/AbstractQuestion"),v=require("bundles/quiz-common/components/PerformanceBar"),u=require("bundles/quiz-common/components/QuestionCountLabel"),l=require("bundles/quiz-common/components/Score"),m=require("bundles/quiz-common/components/SubmitArea"),p=require("bundles/quiz-common/utils/FsmUtils"),t=p.isState,b=require("bundles/quiz-common/actions/QuizActions"),f=b.retakeQuiz,g=require("js/lib/coursera.react-intl"),y=g.FormattedMessage,n=require("i18n!nls/quiz-formative"),h=function PassedLabel(){return e.createElement("div",{className:"c-open-single-page-pass-status c-open-single-page-pass-status-passed c-font-header"},n("Excellent!"))},q=(c=a=function(t){function NotPassedLabel(){return _classCallCheck(this,NotPassedLabel),_possibleConstructorReturn(this,t.apply(this,arguments))}return _inherits(NotPassedLabel,t),NotPassedLabel.prototype.render=function render(){var t=this.props.evaluation;return e.createElement("div",{className:"c-open-single-page-pass-status c-font-header"},e.createElement(y,{message:n("Score required to pass: {numQuestionsRequired} of {numQuestions} correct, or higher."),numQuestionsRequired:t.getMinimumPassingScore(),numQuestions:t.maxScore}))},NotPassedLabel}(e.Component),a.propTypes={evaluation:e.PropTypes.instanceOf(i)},c),E=(s=o=function(o){function FormativeQuizHeader(){var n,e,s;_classCallCheck(this,FormativeQuizHeader);for(var a=arguments.length,i=Array(a),t=0;a>t;t++)i[t]=arguments[t];return n=e=_possibleConstructorReturn(this,o.call.apply(o,[this].concat(i))),e.onRetakeClick=function(){var t=e.context.executeAction,n=e.props.assessmentClient;t(f,{client:n})},s=n,_possibleConstructorReturn(e,s)}return _inherits(FormativeQuizHeader,o),FormativeQuizHeader.prototype.render=function render(){var s=this.props,i=s.itemMetadata,c=s.questions,a=s.evaluation,o=s.attemptState,p=s.onSubmit,r=s.nextItemMetadata,d=a&&a.isPassed();return e.createElement("div",{className:"rc-FormativeQuizHeader bt3-row c-open-single-page-quiz-assessment-headers"},e.createElement("div",{className:"bt3-col-md-9 c-open-single-page-assessment-results"},e.createElement("h1",{className:"display-2-text c-open-single-page-title"},i.getName()),!t(o,"loading","load-error","submitted")&&e.createElement("div",{className:"c-open-single-page-description"},e.createElement("p",null,e.createElement(u,{questionCount:c.length}))),t(o,"submitted")&&e.createElement(l,{evaluation:a}),t(o,"submitted")&&a&&e.createElement(v,{evaluation:a,showValue:!1}),t(o,"submitted")&&(d?e.createElement(h,null):e.createElement(q,{evaluation:a}))),!t(o,"nothing","loading","load-error","submitted")&&e.createElement("div",{className:"bt3-col-md-3"},e.createElement(m,{itemMetadata:i,attemptState:o,onSubmit:p})),t(o,"submitted")&&e.createElement("div",{className:"bt3-col-md-3 c-open-single-page-submission-area"},e.createElement("div",{className:"c-open-single-page-button-container"},e.createElement("button",{className:"c-open-single-page-action-button secondary",onClick:this.onRetakeClick},n("Retake"))),e.createElement("div",{className:"c-open-single-page-button-container"},r?e.createElement("a",{className:"c-open-single-page-action-button link-button.passive bt3-btn-block",href:r.getLink(),"data-js":"open-course-link"},n("Next")):e.createElement("a",{className:"c-open-single-page-action-button link-button passive bt3-btn-block c-btn-white",href:i.get("course").getLink()+"/home/welcome","data-js":"open-course-link"},n("Course Home")))))},FormativeQuizHeader}(e.Component),o.propTypes={itemMetadata:e.PropTypes.instanceOf(r).isRequired,questions:e.PropTypes.arrayOf(e.PropTypes.instanceOf(d)).isRequired,attemptState:e.PropTypes.string.isRequired,onSubmit:e.PropTypes.func.isRequired,assessmentClient:e.PropTypes.object.isRequired,evaluation:e.PropTypes.instanceOf(i),nextItemMetadata:e.PropTypes.instanceOf(r)},o.contextTypes={executeAction:e.PropTypes.func.isRequired},s);module.exports=E});