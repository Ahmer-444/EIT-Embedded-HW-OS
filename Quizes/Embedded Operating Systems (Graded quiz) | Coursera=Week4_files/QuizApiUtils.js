define("bundles/quiz-common/utils/QuizApiUtils",["require","exports","module","q","bundles/quiz-question-types/utils/QuestionUtils","bundles/quiz-common/models/GradingAttempt","bundles/quiz-common/models/QuizSessionData","pages/open-course/assessment/clients/contentRequesterAssessmentClient","pages/open-course/assessment/clients/naptimeAssessmentClient","pages/open-course/assessment/models/exam/assessment","pages/open-course/assessment/models/quiz/assessment","pages/open-course/common/contentRequester","pages/open-course/common/naptimeItemClient"],function(require,exports,module){"use strict";function getContentModelPromise(e){if("quiz"===e.getTypeName())return a({metadata:e});if("exam"===e.getTypeName())return i({metadata:e})}function getClient(n){if("quiz"===n.getTypeName()){var t=new s(n);return new e(t)}if("exam"===n.getTypeName()){var o=new m(n);return new u(n,o)}}var r=require("q"),n=require("bundles/quiz-question-types/utils/QuestionUtils"),t=require("bundles/quiz-common/models/GradingAttempt"),o=require("bundles/quiz-common/models/QuizSessionData"),e=require("pages/open-course/assessment/clients/contentRequesterAssessmentClient"),u=require("pages/open-course/assessment/clients/naptimeAssessmentClient"),i=require("pages/open-course/assessment/models/exam/assessment"),a=require("pages/open-course/assessment/models/quiz/assessment"),s=require("pages/open-course/common/contentRequester"),m=require("pages/open-course/common/naptimeItemClient");exports.loadQuiz=function(e){return getContentModelPromise(e).then(function(s){var n=getClient(e);return{contentModel:s,assessmentClient:n}})},exports.getSessionId=function(e){return e.getOrCreateSession()},exports.getSessionData=function(e,s){return e.callAction(s,"getState").then(function(u){var s=u.result,i=s.questions.map(function(e){return n.fromJson(e)}),e=e&&new t(e),a=new o(i,s.evaluation);return{sessionData:a,gradingAttempt:e}})},exports.submit=function(e,s,n,t,o){var u={responses:n.map(function(e){return t[e.id].toJson()})};return e.callAction(s,"submitResponses",u,o).then(function(e){return e})}});