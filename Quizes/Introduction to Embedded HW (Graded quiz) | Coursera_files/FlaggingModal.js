define("bundles/discussions/components/FlaggingModal",["require","exports","module","i18n!nls/discussions","classnames","react","bundles/discussions/actions/DropdownActions","bundles/phoenix/components/Modal","css!./__styles__/FlaggingModal"],function(require,exports,module){"use strict";function _defaults(e,n){for(var r=Object.getOwnPropertyNames(n),t=0;t<r.length;t++){var s=r[t],o=Object.getOwnPropertyDescriptor(n,s);o&&o.configurable&&void 0===e[s]&&Object.defineProperty(e,s,o)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):_defaults(t,e))}var s,o,t=require("i18n!nls/discussions"),r=require("classnames"),e=require("react"),n=require("bundles/discussions/actions/DropdownActions"),i=n.flagPost,a=n.unflagPost,c=require("bundles/phoenix/components/Modal");require("css!./__styles__/FlaggingModal");var l=(o=s=function(s){function FlaggingModal(){var o,e,n;_classCallCheck(this,FlaggingModal);for(var r=arguments.length,c=Array(r),t=0;r>t;t++)c[t]=arguments[t];return o=e=_possibleConstructorReturn(this,s.call.apply(s,[this].concat(c))),e.state={error:!1,saving:!1,success:!1},e.handleSubmitError=function(){e.setState({saving:!1,error:!0})},e.flagAction=function(){var t=e.props.post;e.setState({saving:!0,success:!1,error:!1}),e.isActive()?e.context.executeAction(a,{post:t,handleSuccess:e.props.handleClose,handleFailure:e.handleSubmitError}):e.context.executeAction(i,{post:t,handleSuccess:function handleSuccess(){e.setState({success:!0,saving:!1})},handleFailure:e.handleSubmitError})},e.isActive=function(){return e.props.post.flagDetails&&e.props.post.flagDetails.isActive},n=o,_possibleConstructorReturn(e,n)}return _inherits(FlaggingModal,s),FlaggingModal.prototype.getBodyText=function getBodyText(){return t(this.state.success?"Thank you. We will review it and take appropriate action.":this.state.error?"Sorry, an error occured. Please try again later.":this.isActive()?"Are you sure you want to resolve the reported post?":"Are you sure you want to report this post?")},FlaggingModal.prototype.renderButtonContainer=function renderButtonContainer(){return e.createElement("div",{className:"horizontal-box align-items-right button-container"},e.createElement("button",{className:"passive never-mind",onClick:this.props.handleClose},t("Never mind")),e.createElement("button",{className:"secondary",onClick:this.flagAction,disabled:this.state.error||this.state.saving},t(this.isActive()?"Resolve":"Report")))},FlaggingModal.prototype.render=function render(){var s=r("modal-text",{"body-1-text":!this.state.success,"body-2-text":this.state.success,success:this.state.success});return e.createElement(c,{handleClose:this.props.handleClose,modalName:t(this.isActive?"Resolve":"Report"),ref:"editThreadModal",className:"rc-FlaggingModal"},this.state.success||e.createElement("h3",{className:"c-modal-title headline-3-text"},t(this.isActive()?"Resolve report":"Report as inappropriate")),e.createElement("p",{className:s},this.getBodyText()),this.state.success||this.renderButtonContainer())},FlaggingModal}(e.Component),s.propTypes={handleClose:e.PropTypes.func.isRequired,post:e.PropTypes.object.isRequired},s.contextTypes={executeAction:e.PropTypes.func.isRequired},o);module.exports=l});