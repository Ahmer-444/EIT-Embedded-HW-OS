define("bundles/discussions/components/repliesList/ReplyContainer",["require","exports","module","react","vendor/cnpm/fluxible.v0-4/addons/connectToStores","bundles/discussions/components/profiles/ProfileArea","pages/open-course/common/models/currentSocialProfile","bundles/discussions/components/repliesList/ReplyCMLInput","bundles/discussions/components/repliesList/CommentPaginationContainer","bundles/discussions/components/repliesList/ReplyComponent","bundles/discussions/lib/propTypes","css!./__styles__/ReplyContainer"],function(require,exports,module){"use strict";function _defaults(e,n){for(var r=Object.getOwnPropertyNames(n),t=0;t<r.length;t++){var s=r[t],o=Object.getOwnPropertyDescriptor(n,s);o&&o.configurable&&void 0===e[s]&&Object.defineProperty(e,s,o)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):_defaults(t,e))}var s,o,e=require("react"),r=require("vendor/cnpm/fluxible.v0-4/addons/connectToStores"),n=require("bundles/discussions/components/profiles/ProfileArea"),t=require("pages/open-course/common/models/currentSocialProfile"),i=require("bundles/discussions/components/repliesList/ReplyCMLInput"),l=require("bundles/discussions/components/repliesList/CommentPaginationContainer"),p=require("bundles/discussions/components/repliesList/ReplyComponent"),a=require("bundles/discussions/lib/propTypes"),c=a.replyPropType;require("css!./__styles__/ReplyContainer");var m=(o=s=function(s){function ReplyContainer(t,o){_classCallCheck(this,ReplyContainer);var e=_possibleConstructorReturn(this,s.call(this,t,o));return e.toggleComments=function(){e.setState({showComments:!e.state.showComments})},e.state={showComments:t.reply.childAnswerCount>0&&!t.collapseCommentsByDefault},e}return _inherits(ReplyContainer,s),ReplyContainer.prototype.componentWillReceiveProps=function componentWillReceiveProps(e){if(!this.props.comments||!e.comments)return;this.props.comments.length<e.comments.length&&this.setState({showComments:!0})},ReplyContainer.prototype.render=function render(){var s=this.props,o=s.reply,a=s.answerId,c=s.commentId,y=s.isClosed,u=s.isHighlighted,d=s.savingState,f=s.showJumpLink,m=s.forumLink,h=s.question,r=s.isQuestionLoaded;if(o.hide)return null;return e.createElement(p,{reply:o,commentsEnabled:this.state.showComments,toggleComments:this.toggleComments,answerId:a,commentId:c,commentCount:o.childAnswerCount||0,className:"rc-ReplyContainer",isHighlighted:u,isQuestionLoaded:r,forumLink:m,showJumpLink:f},this.state.showComments&&e.createElement("div",null,e.createElement(l,{reply:o,answerId:a,commentId:c,forumLink:m,isQuestionLoaded:r}),!y&&e.createElement("div",{className:"comment-input horizontal-box"},e.createElement(n,{externalUserId:t.get("externalUserId"),fullName:t.get("fullName"),profileImageUrl:t.getProfileImageUrl()}),e.createElement(i,{question:h,parentPost:o,savingState:d}))))},ReplyContainer}(e.Component),s.propTypes={reply:c.isRequired,savingState:e.PropTypes.string,answerId:e.PropTypes.string,commentId:e.PropTypes.string,isClosed:e.PropTypes.bool,isHighlighted:e.PropTypes.bool,comments:e.PropTypes.array,isQuestionLoaded:e.PropTypes.bool,forumLink:e.PropTypes.string,question:e.PropTypes.object,showJumpLink:e.PropTypes.bool,collapseCommentsByDefault:e.PropTypes.bool},o);module.exports=r(m,["ThreadDetailsStore","ThreadSettingsStore"],function(s,o){var e=s.ThreadDetailsStore,n=s.ThreadSettingsStore,t=o.reply;return{question:e.getQuestion(t.questionId),comments:e.getLoadedComments(t.topLevelForumAnswerId),isClosed:n.isClosed(),isHighlighted:e.isHighlighted(t),savingState:e.savingStates[t.id]}})});