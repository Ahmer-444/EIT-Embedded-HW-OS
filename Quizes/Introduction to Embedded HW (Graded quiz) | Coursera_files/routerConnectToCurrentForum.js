define("bundles/discussions/utils/routerConnectToCurrentForum",["require","exports","module","bundles/discussions/constants","js/lib/path"],function(require,exports,module){"use strict";var o=Object.assign||function(n){for(var r=1;r<arguments.length;r++){var e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(n[o]=e[o])}return n},n=require("bundles/discussions/constants"),r=n.naptimeForumTypes,e=require("js/lib/path");module.exports=function(t,n){if(!n.courseSlug)throw new Error("routerConnectToCurrentForum requires course slug as argument");var s=n.courseForums||[],F=n.mentorForums||[],d=n.groupForums||[],l=n.weekNumber||t.params.week_number,f=n.forumId||t.params.forum_id,m=n.groupId||t.params.group_id,T=n.itemId||t.location.pathname.indexOf("/discussionPrompt/")<0&&t.params.item_id,u=void 0;if(l){var p=s.find(function(r){return"weekForumType"===r.forumType.typeName&&r.forumType.definition.weekNumber===parseInt(l,10)});u=p&&p.id}else if(m){var a=d.find(function(r){return r.forumType.definition.groupId===m});a||(a=d.find(function(r){return r.forumId===m})),u=a&&a.id}else if(f){var b=s.concat(F),y=b.find(function(r){return r.forumId===f||r.legacyForumId===f});u=y&&y.id}else if(T){var g=s.find(function(r){return r.forumType.definition.itemId===T});u=g&&g.id}else{var v=s.find(function(e){return e.forumType.typeName===r.rootForumType});u=v&&v.id}var i=s.concat(F).concat(d).find(function(r){return r.id===u}),c=void 0;if(i&&i.forumType.typeName===r.itemForumType){var I=t.location.pathname.split("discussions");I.pop(),c=e.join(I.join("discussions"),"discussions")}else i&&(c=e.join("/learn",n.courseSlug,i.link));return o({},n,{currentForumId:u,currentForum:i,currentForumUrl:c,rootPath:"/learn/"+n.courseSlug,contextId:i&&(i.forumType.typeName===r.groupForumType?m:n.courseId)})}});