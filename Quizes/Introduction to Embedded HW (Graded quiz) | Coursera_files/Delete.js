define("bundles/discussions/components/Delete",["require","exports","module","i18n!nls/discussions","react","react-dom","bundles/discussions/components/ModerationReasons","bundles/discussions/actions/DropdownActions","bundles/discussions/actions/ThreadsActions","bundles/phoenix/components/Modal","bundles/discussions/components/NotifyOption","css!./__styles__/Delete"],function(require,exports,module){"use strict";function _defaults(e,n){for(var r=Object.getOwnPropertyNames(n),t=0;t<r.length;t++){var s=r[t],o=Object.getOwnPropertyDescriptor(n,s);o&&o.configurable&&void 0===e[s]&&Object.defineProperty(e,s,o)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):_defaults(t,e))}var s,n,t=require("i18n!nls/discussions"),e=require("react"),o=require("react-dom"),r=require("bundles/discussions/components/ModerationReasons"),i=require("bundles/discussions/actions/DropdownActions"),a=i.deletePost,c=require("bundles/discussions/actions/ThreadsActions"),l=c.clearThreadsCache,d=require("bundles/phoenix/components/Modal"),u=require("bundles/discussions/components/NotifyOption");require("css!./__styles__/Delete");var p=(n=s=function(s){function Delete(){var o,e,n;_classCallCheck(this,Delete);for(var r=arguments.length,i=Array(r),t=0;r>t;t++)i[t]=arguments[t];return o=e=_possibleConstructorReturn(this,s.call.apply(s,[this].concat(i))),e.state={selectedOption:"",showInputError:!1,showServerError:!1,dontNotify:!1},e.handleSelect=function(t){e.setState({selectedOption:t.target.value})},e.handleCancel=function(){e.props.handleClose()},e.handleSubmit=function(){!e.props.showReasons||e.state.selectedOption?(e.context.executeAction(l),e.context.executeAction(a,{post:e.props.post,reason:e.state.selectedOption,handleSuccess:e.onDeleteSuccess,handleFailure:e.onDeleteError,dontNotify:e.state.dontNotify})):e.setState({showInputError:!0})},e.handleCloseModal=function(){e.props.handleClose()},e.onDeleteError=function(t){e.setState({showServerError:!0})},e.onDeleteSuccess=function(){e.props.handleClose(),"question"===e.props.post.type&&e.props.onDeleteSuccess(e.state.selectedOption)},e.toggleNotify=function(){e.setState({dontNotify:!e.state.dontNotify})},n=o,_possibleConstructorReturn(e,n)}return _inherits(Delete,s),Delete.prototype.componentDidMount=function componentDidMount(){this.refs.firstOption?o.findDOMNode(this.refs.firstOption).focus():o.findDOMNode(this.refs.cancel).focus()},Delete.prototype.render=function render(){var s=e.createElement("div",null,e.createElement(r,{ref:"reasons",handleSelect:this.handleSelect}),e.createElement(u,{dontNotify:this.state.dontNotify,toggleNotify:this.toggleNotify})),o=e.createElement("div",{className:"c-error-text c-modal-error-message"},t("Please select a reason")),n=e.createElement("div",{className:"c-error-text c-modal-error-message"},t("Error deleting post; please try again or reload the page")),i=e.createElement("div",{className:"c-delete-warning"},t("Are you sure you want to delete this post?")),a=e.createElement("div",{className:"c-modal-subtitle"},e.createElement("span",null,t("Why do you want to delete this? "))),c=e.createElement(d,{handleClose:this.handleCloseModal,modalName:t("Delete Post")},e.createElement("h1",{className:"c-modal-title subtitle display-1-text"},t("Delete Post")),this.props.showReasons&&a,this.props.showReasons?s:i,e.createElement("div",null,this.state.showInputError&&o,this.state.showServerError&&n,e.createElement("div",{className:"horizontal-box align-items-right"},e.createElement("button",{ref:"cancel",className:"passive",onClick:this.handleCancel},"Cancel"),"  ",e.createElement("button",{ref:"submit",disabled:this.state.saving,className:"secondary",type:"submit",onClick:this.handleSubmit},t("Delete")))));return e.createElement("div",{className:"rc-Delete"},c)},Delete}(e.Component),s.propTypes={showReasons:e.PropTypes.bool.isRequired,handleClose:e.PropTypes.func.isRequired,post:e.PropTypes.object.isRequired,onDeleteSuccess:e.PropTypes.func},s.contextTypes={executeAction:e.PropTypes.func.isRequired},n);module.exports=p});