define("bundles/discussions/components/SoftDelete",["require","exports","module","i18n!nls/discussions","react","bundles/discussions/actions/DropdownActions","css!./__styles__/SoftDelete"],function(require,exports,module){"use strict";function _defaults(e,n){for(var s=Object.getOwnPropertyNames(n),t=0;t<s.length;t++){var r=s[t],o=Object.getOwnPropertyDescriptor(n,r);o&&o.configurable&&void 0===e[r]&&Object.defineProperty(e,r,o)}return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _possibleConstructorReturn(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function _inherits(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):_defaults(t,e))}var t,o,r=require("i18n!nls/discussions"),e=require("react"),n=require("bundles/discussions/actions/DropdownActions"),s=n.undoDelete;require("css!./__styles__/SoftDelete");var c=(o=t=function(t){function SoftDelete(){var o,e,n;_classCallCheck(this,SoftDelete);for(var c=arguments.length,i=Array(c),r=0;c>r;r++)i[r]=arguments[r];return o=e=_possibleConstructorReturn(this,t.call.apply(t,[this].concat(i))),e.state={showError:!1},e.handleUndoDelete=function(t){t.preventDefault(),e.context.executeAction(s,{post:e.props.entry,handleFailure:e.handleError,onSuccess:function onSuccess(){}})},e.handleError=function(t){e.setState({showError:!0})},n=o,_possibleConstructorReturn(e,n)}return _inherits(SoftDelete,t),SoftDelete.prototype.render=function render(){var n=e.createElement("div",{ref:"error",className:"c-soft-delete-error c-error-text"},r("Error undoing delete, please reload the page and try again")),t=this.props.entry,s=t.state.deleted&&t.state.deleted.userId===t.creator.userId,c=r(s?"This post has been deleted by its creator":"This post has been deleted by a moderator"),i=e.createElement("div",{className:"c-soft-delete-header"},e.createElement("span",{ref:"message"},c," · "),e.createElement("button",{ref:"undoDelete",className:"button-link",onClick:this.handleUndoDelete},r("Undo Delete"))),o="c-soft-delete";return this.props.hideUndoDelete&&(o+=" c-soft-delete-clickable"),e.createElement("div",{className:"rc-SoftDelete"},e.createElement("div",{className:o},!this.props.hideUndoDelete&&!this.state.showError&&i,this.state.showError&&n))},SoftDelete}(e.Component),t.propTypes={hideUndoDelete:e.PropTypes.bool,entry:e.PropTypes.object.isRequired},t.contextTypes={executeAction:e.PropTypes.func.isRequired},o);module.exports=c});